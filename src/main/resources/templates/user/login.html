<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>로그인</title>
    <link th:href="@{/css/login.css}" rel="stylesheet" />
</head>
<body>
<div class="login-container">
    <div class="login-content">
        <div class="login-top">
            <a th:href="@{/}" class="login-top-logo">
                  <span class="login-top-logo-text">
                      SELECT <span class="login-top-logo-text-star">*</span>
                  </span>
            </a>
            <span class="login-top-intro1">
                  <span>SELECT*에 오신것을 환영합니다.</span>
              </span>
            <span class="login-top-intro2">
                  <span>SELECT*는 개발자를 위한 모임 커뮤니티입니다.</span>
              </span>
        </div>

        <div class="login-form">
            <!-- 로그인 form  -->
            <form action="/logincheck" method="post" id="loginForm">
                <div class="login-form-input">
                    <!--  아이디  -->
                    <div class="login-form-input-box">
                        <span class="login-form-input-box-title">아이디</span>
                        <div class="login-form-input-withbtn">
                            <input
                                    type="text" id="name" name="loginName" class="login-form-input-box-content-withbtn" />
                        </div>
                        <div class="login-form-input-check-alert" id="checkId">
                            <span></span>
                        </div>
                    </div>

                    <!--  비밀번호  -->
                    <div class="login-form-input-box">
                        <span class="login-form-input-box-title">비밀번호</span>
                        <input type="password" id="password" name="loginPassword" class="login-form-input-box-content" />
                        <div class="login-form-input-check-alert" id="checkPassword">
                            <span></span>
                        </div>
                    </div>
                    <!-- 로그인 버튼 -->
                    <button type="button" onclick="submitLoginForm()" class="login-form-submit">
                        <span class="login-form-submit-text"><span>로그인</span></span>
                    </button>
                </div>
            </form>

            <!-- 회원가입 페이지 이동-->
            <div class="login-movetoSignup">
                <span>아직 회원이 아니신가요?</span>
                <a th:href="@{/signup}" class="login-movetoLogin-SignupPg">회원가입</a>
            </div>
        </div>
    </div>
</div>
<script>
    // 유효성 검사
       // 아이디
       function validateId(name) {
           var alertElement = document.getElementById('checkId');
           if (name.length < 1) {
               alertElement.querySelector('span').textContent = "아이디를 입력해주세요.";
               return false;
           }
           alertElement.querySelector('span').textContent = "";
           return true;
       }

       // 비밀번호
       function validatePassword(password) {
           var alertElement = document.getElementById('checkPassword');
           if (password.length < 1) {
               alertElement.querySelector('span').textContent = "비밀번호를 입력해주세요.";
               return false;
           }
           alertElement.querySelector('span').textContent = "";
           return true;
       }

        // 폼 제출
        function submitLoginForm() {
            var name = document.querySelector('input[name="loginName"]').value;
            var password = document.querySelector('input[name="loginPassword"]').value;

            if (validateId(name) && validatePassword(password)) {
                document.getElementById('loginForm').submit();
            }
        }

     document.getElementById('loginForm').addEventListener('submit', function(event) {
                event.preventDefault();
                var searchQuery = document.querySelector('.main-header-search-input').value;
                window.location.href = '/search?searchWord=' + searchQuery;
            });
</script>
</body>
</html>